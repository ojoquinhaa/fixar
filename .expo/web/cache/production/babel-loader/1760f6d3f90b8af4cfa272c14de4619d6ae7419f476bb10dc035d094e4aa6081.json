{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Pressable from\"react-native-web/dist/exports/Pressable\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import BookAPI from\"../../API/Book\";import{useNavigation,useRoute}from\"@react-navigation/native\";import{useState}from\"react\";import Button from\"react-native-paper/lib/module/components/Button/Button\";import Menu from\"react-native-paper/lib/module/components/Menu/Menu\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookPressable(props){var navigation=useNavigation();var route=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var openMenu=function openMenu(){return setVisible(true);};var closeMenu=function closeMenu(){return setVisible(false);};var token=route.params.token;function bookHandler(){navigation.navigate(\"Fantastic\",{book:props.book,token:props.token});}function deleteBook(){var api=new BookAPI(token);api.delete(props.book.id).then(function(res){if(res.msg){props.setBooks(props.books.filter(function(b){return b.id!==props.book.id;}));props.setData(props.books.filter(function(b){return b.id!==props.book.id;}));alert(res.msg);return;}alert(\"Falha ao deletar seu livro.\");});}return _jsxs(Pressable,{style:{flex:1,width:props.window.width*0.25+250,height:\"100%\",maxHeight:150,backgroundColor:props.book.background,minHeight:150,marginTop:20},onPress:bookHandler,children:[_jsx(Menu,{visible:visible,onDismiss:closeMenu,anchor:_jsx(Button,{onPress:openMenu,style:{alignSelf:\"flex-end\",height:\"10%\"},icon:\"menu\",children:\"Menu\"}),children:_jsx(Menu.Item,{onPress:deleteBook,title:\"Deletar\"})}),_jsx(View,{style:{width:\"100%\",maxHeight:\"50%\",flex:1,justifyContent:\"center\",alignItems:\"center\"},children:_jsx(Text,{style:{fontSize:20,color:props.book.color,textAlign:\"center\"},children:props.book.name})})]});}","map":{"version":3,"names":["BookAPI","useNavigation","useRoute","useState","Button","Menu","jsx","_jsx","jsxs","_jsxs","BookPressable","props","navigation","route","_useState","_useState2","_slicedToArray","visible","setVisible","openMenu","closeMenu","token","params","bookHandler","navigate","book","deleteBook","api","delete","id","then","res","msg","setBooks","books","filter","b","setData","alert","Pressable","style","flex","width","window","height","maxHeight","backgroundColor","background","minHeight","marginTop","onPress","children","onDismiss","anchor","alignSelf","icon","Item","title","View","justifyContent","alignItems","Text","fontSize","color","textAlign","name"],"sources":["/home/ojoquinhaa/Documentos/trabalho/inktone/frontend/components/Book/BookPressable.tsx"],"sourcesContent":["import { Pressable, ScaledSize, Text, View } from \"react-native\";\nimport BookAPI, { Book } from \"../../API/Book\";\nimport {\n  NavigationProp,\n  RouteProp,\n  useNavigation,\n  useRoute,\n} from \"@react-navigation/native\";\nimport DrawerList from \"../Drawer/DrawerList\";\nimport { Dispatch, SetStateAction, useState } from \"react\";\nimport { Button, Menu } from \"react-native-paper\";\n\ntype props = {\n  book: Book;\n  window: ScaledSize;\n  token: string;\n  books: Book[];\n  setBooks: Dispatch<SetStateAction<Book[]>>;\n  setData: Dispatch<SetStateAction<Book[]>>;\n};\n\nexport default function BookPressable(props: props) {\n  const navigation = useNavigation<NavigationProp<DrawerList>>();\n  const route = useRoute<RouteProp<DrawerList>>();\n\n  const [visible, setVisible] = useState(false);\n  const openMenu = () => setVisible(true);\n  const closeMenu = () => setVisible(false);\n\n  const { token } = route.params;\n\n  function bookHandler() {\n    navigation.navigate(\"Fantastic\", {\n      book: props.book,\n      token: props.token,\n    });\n  }\n\n  function deleteBook() {\n    const api = new BookAPI(token);\n    api.delete(props.book.id!).then((res) => {\n      if (res.msg) {\n        props.setBooks(props.books.filter((b) => b.id !== props.book.id));\n        props.setData(props.books.filter((b) => b.id !== props.book.id));\n        alert(res.msg);\n        return;\n      }\n      alert(\"Falha ao deletar seu livro.\");\n    });\n  }\n\n  return (\n    <Pressable\n      style={{\n        flex: 1,\n        width: props.window.width * 0.25 + 250,\n        height: \"100%\",\n        maxHeight: 150,\n        backgroundColor: props.book.background,\n        minHeight: 150,\n        marginTop: 20,\n      }}\n      onPress={bookHandler}\n    >\n      <Menu\n        visible={visible}\n        onDismiss={closeMenu}\n        anchor={\n          <Button\n            onPress={openMenu}\n            style={{ alignSelf: \"flex-end\", height: \"10%\" }}\n            icon=\"menu\"\n          >\n            Menu\n          </Button>\n        }\n      >\n        <Menu.Item onPress={deleteBook} title=\"Deletar\" />\n      </Menu>\n      <View\n        style={{\n          width: \"100%\",\n          maxHeight: \"50%\",\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Text\n          style={{\n            fontSize: 20,\n            color: props.book.color,\n            textAlign: \"center\",\n          }}\n        >\n          {props.book.name}\n        </Text>\n      </View>\n    </Pressable>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}