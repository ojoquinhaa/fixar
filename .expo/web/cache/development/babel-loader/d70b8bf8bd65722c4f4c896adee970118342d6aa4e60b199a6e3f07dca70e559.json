{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { Button, TextInput, useTheme } from \"react-native-paper\";\nimport { getLoginStyleSheet } from \"../../styles\";\nimport { useEffect, useState } from \"react\";\nimport UserAPI from \"../../API/User\";\nimport * as SecureStory from \"expo-secure-store\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login(props) {\n  var window = useWindowDimensions();\n  var theme = useTheme();\n  var styles = getLoginStyleSheet(window, theme);\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  useEffect(function () {\n    if (Platform.OS !== \"web\") {\n      SecureStory.getItemAsync(\"token\").then(function (token) {\n        if (token) {\n          props.setToken(token);\n          props.setLogged(true);\n        }\n      });\n    }\n  });\n  function loginHandler() {\n    return _loginHandler.apply(this, arguments);\n  }\n  function _loginHandler() {\n    _loginHandler = _asyncToGenerator(function* () {\n      var api = new UserAPI(user, password);\n      var data = yield api.login();\n      if (data.access) {\n        alert(\"Logado com successo!\");\n        if (Platform.OS !== \"web\") {\n          yield SecureStory.setItemAsync(\"token\", data.access);\n        }\n        props.setLogged(true);\n        props.setToken(data.access);\n        return;\n      }\n      alert(\"Credenciáis inválidas.\");\n    });\n    return _loginHandler.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.login,\n    children: [_jsx(Image, {\n      source: require(\"../../assets/icon.png\"),\n      style: styles.logo\n    }), _jsxs(View, {\n      style: styles.form,\n      children: [_jsx(TextInput, {\n        label: \"Usu\\xE1rio\",\n        mode: \"flat\",\n        style: styles.input,\n        onChangeText: function onChangeText(text) {\n          return setUser(text);\n        },\n        value: user\n      }), _jsx(TextInput, {\n        label: \"Senha\",\n        mode: \"flat\",\n        secureTextEntry: true,\n        style: styles.input,\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        value: password\n      }), _jsx(Pressable, {\n        style: styles.input,\n        children: _jsx(Button, {\n          mode: \"contained\",\n          dark: true,\n          onPress: loginHandler,\n          style: {\n            backgroundColor: \"#c83473\"\n          },\n          children: \"Enviar\"\n        })\n      })]\n    }), _jsx(Image, {\n      source: require(\"../../assets/logomarca.png\"),\n      style: {\n        width: 50,\n        height: 50,\n        position: \"relative\",\n        top: 100\n      }\n    })]\n  }, \"Login\");\n}","map":{"version":3,"names":["Button","TextInput","useTheme","getLoginStyleSheet","useEffect","useState","UserAPI","SecureStory","Platform","jsx","_jsx","jsxs","_jsxs","Login","props","window","useWindowDimensions","theme","styles","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","password","setPassword","OS","getItemAsync","then","token","setToken","setLogged","loginHandler","_loginHandler","apply","arguments","_asyncToGenerator","api","data","login","access","alert","setItemAsync","View","style","children","Image","source","require","logo","form","label","mode","input","onChangeText","text","value","secureTextEntry","Pressable","dark","onPress","backgroundColor","width","height","position","top"],"sources":["/home/ojoquinhaa/Documentos/trabalho/inktone/fixar/components/Screen/Login.tsx"],"sourcesContent":["import { View, useWindowDimensions, Image, Pressable } from \"react-native\";\nimport { Button, TextInput, useTheme } from \"react-native-paper\";\nimport { getLoginStyleSheet } from \"../../styles\";\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport UserAPI from \"../../API/User\";\nimport * as SecureStory from \"expo-secure-store\";\nimport { Platform } from \"react-native\";\n\ntype props = {\n  logged: boolean;\n  setLogged: Dispatch<SetStateAction<boolean>>;\n  setToken: Dispatch<SetStateAction<string>>;\n};\n\nexport default function Login(props: props): JSX.Element {\n  const window = useWindowDimensions();\n  const theme = useTheme();\n  const styles = getLoginStyleSheet(window, theme);\n\n  const [user, setUser] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    if (Platform.OS !== \"web\") {\n      SecureStory.getItemAsync(\"token\").then((token) => {\n        if (token) {\n          props.setToken(token);\n          props.setLogged(true);\n        }\n      });\n    }\n  });\n\n  async function loginHandler(): Promise<void> {\n    const api = new UserAPI(user, password);\n    const data = await api.login();\n\n    if (data.access) {\n      alert(\"Logado com successo!\");\n      if (Platform.OS !== \"web\") {\n        await SecureStory.setItemAsync(\"token\", data.access);\n      }\n      props.setLogged(true);\n      props.setToken(data.access);\n      return;\n    }\n\n    alert(\"Credenciáis inválidas.\");\n  }\n\n  return (\n    <View style={styles.login} key=\"Login\">\n      <Image source={require(\"../../assets/icon.png\")} style={styles.logo} />\n      <View style={styles.form}>\n        <TextInput\n          label=\"Usuário\"\n          mode=\"flat\"\n          style={styles.input}\n          onChangeText={(text) => setUser(text)}\n          value={user}\n        />\n        <TextInput\n          label=\"Senha\"\n          mode=\"flat\"\n          secureTextEntry={true}\n          style={styles.input}\n          onChangeText={(text) => setPassword(text)}\n          value={password}\n        />\n        <Pressable style={styles.input}>\n          <Button\n            mode=\"contained\"\n            dark={true}\n            onPress={loginHandler}\n            style={{ backgroundColor: \"#c83473\" }}\n          >\n            Enviar\n          </Button>\n        </Pressable>\n      </View>\n      <Image\n        source={require(\"../../assets/logomarca.png\")}\n        style={{\n          width: 50,\n          height: 50,\n          position: \"relative\",\n          top: 100,\n        }}\n      />\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}