{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { Button, TextInput, useTheme } from \"react-native-paper\";\nimport { getLoginStyleSheet } from \"../../styles\";\nimport { useEffect, useState } from \"react\";\nimport UserAPI from \"../../API/User\";\nimport * as Keychain from \"react-native-keychain\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login(props) {\n  var window = useWindowDimensions();\n  var theme = useTheme();\n  var styles = getLoginStyleSheet(window, theme);\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  useEffect(function () {\n    try {\n      var token = Keychain.getGenericPassword();\n    } catch (_) {\n      return;\n    }\n  });\n  function loginHandler() {\n    return _loginHandler.apply(this, arguments);\n  }\n  function _loginHandler() {\n    _loginHandler = _asyncToGenerator(function* () {\n      if (user === \"\" || password === \"\") {\n        alert(\"Credenciáis inválidas.\");\n        return;\n      }\n      var api = new UserAPI(user, password);\n      var data = yield api.login();\n      if (data.token) {\n        alert(\"Logado com successo!\");\n        Keychain;\n        setGenericPassword(user, data.token);\n        props.setLogged(true);\n        props.setToken(data.token);\n        return;\n      }\n      alert(\"Credenciáis inválidas.\");\n    });\n    return _loginHandler.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.login,\n    children: [_jsx(Image, {\n      source: require(\"../../assets/icon.png\"),\n      style: styles.logo\n    }), _jsxs(View, {\n      style: styles.form,\n      children: [_jsx(TextInput, {\n        label: \"Usu\\xE1rio\",\n        mode: \"flat\",\n        style: styles.input,\n        onChangeText: function onChangeText(text) {\n          return setUser(text);\n        },\n        value: user\n      }), _jsx(TextInput, {\n        label: \"Senha\",\n        mode: \"flat\",\n        secureTextEntry: true,\n        style: styles.input,\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        value: password\n      }), _jsx(Pressable, {\n        style: styles.input,\n        children: _jsx(Button, {\n          mode: \"contained\",\n          style: styles.button,\n          dark: true,\n          onPress: loginHandler,\n          children: \"Enviar\"\n        })\n      })]\n    })]\n  }, \"Login\");\n}","map":{"version":3,"names":["Button","TextInput","useTheme","getLoginStyleSheet","useEffect","useState","UserAPI","Keychain","jsx","_jsx","jsxs","_jsxs","Login","props","window","useWindowDimensions","theme","styles","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","password","setPassword","token","getGenericPassword","_","loginHandler","_loginHandler","apply","arguments","_asyncToGenerator","alert","api","data","login","setGenericPassword","setLogged","setToken","View","style","children","Image","source","require","logo","form","label","mode","input","onChangeText","text","value","secureTextEntry","Pressable","button","dark","onPress"],"sources":["/home/ojoquinhaa/Documentos/trabalho/inktone/frontend/components/Screen/Login.tsx"],"sourcesContent":["import { View, useWindowDimensions, Image, Pressable } from \"react-native\";\nimport { Button, TextInput, useTheme } from \"react-native-paper\";\nimport { getLoginStyleSheet } from \"../../styles\";\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport UserAPI from \"../../API/User\";\nimport * as Keychain from \"react-native-keychain\";\n\ntype props = {\n  logged: boolean;\n  setLogged: Dispatch<SetStateAction<boolean>>;\n  setToken: Dispatch<SetStateAction<string>>;\n};\n\nexport default function Login(props: props): JSX.Element {\n  const window = useWindowDimensions();\n  const theme = useTheme();\n  const styles = getLoginStyleSheet(window, theme);\n\n  const [user, setUser] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    try {\n      const token = Keychain.getGenericPassword();\n    } catch (_) {\n      return;\n    }\n  });\n\n  async function loginHandler(): Promise<void> {\n    if (user === \"\" || password === \"\") {\n      alert(\"Credenciáis inválidas.\");\n      return;\n    }\n\n    const api = new UserAPI(user, password);\n    const data = await api.login();\n\n    if (data.token) {\n      alert(\"Logado com successo!\");\n      Keychain;\n      setGenericPassword(user, data.token);\n      props.setLogged(true);\n      props.setToken(data.token);\n      return;\n    }\n\n    alert(\"Credenciáis inválidas.\");\n  }\n\n  return (\n    <View style={styles.login} key=\"Login\">\n      <Image source={require(\"../../assets/icon.png\")} style={styles.logo} />\n      <View style={styles.form}>\n        <TextInput\n          label=\"Usuário\"\n          mode=\"flat\"\n          style={styles.input}\n          onChangeText={(text) => setUser(text)}\n          value={user}\n        />\n        <TextInput\n          label=\"Senha\"\n          mode=\"flat\"\n          secureTextEntry={true}\n          style={styles.input}\n          onChangeText={(text) => setPassword(text)}\n          value={password}\n        />\n        <Pressable style={styles.input}>\n          <Button\n            mode=\"contained\"\n            style={styles.button}\n            dark={true}\n            onPress={loginHandler}\n          >\n            Enviar\n          </Button>\n        </Pressable>\n      </View>\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}