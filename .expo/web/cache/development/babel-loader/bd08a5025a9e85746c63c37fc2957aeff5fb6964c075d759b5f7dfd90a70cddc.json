{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport BookAPI from \"../../API/Book\";\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\nimport { useState } from \"react\";\nimport { Button, Menu } from \"react-native-paper\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BookPressable(props) {\n  var navigation = useNavigation();\n  var route = useRoute();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var openMenu = function openMenu() {\n    return setVisible(true);\n  };\n  var closeMenu = function closeMenu() {\n    return setVisible(false);\n  };\n  var token = route.params.token;\n  function bookHandler() {\n    navigation.navigate(\"Fantastic\", {\n      book: props.book,\n      token: props.token\n    });\n  }\n  function deleteBook() {\n    var api = new BookAPI(token);\n    api.delete(props.book.id).then(function (res) {\n      if (res === 204) {\n        props.setBooks(props.books.filter(function (b) {\n          return b.id !== props.book.id;\n        }));\n        props.setData(props.books.filter(function (b) {\n          return b.id !== props.book.id;\n        }));\n        alert(\"Livro deletado com sucesso!\");\n        return;\n      }\n      alert(\"Falha ao deletar seu livro.\");\n    });\n  }\n  return _jsxs(Pressable, {\n    style: {\n      flex: 1,\n      width: props.window.width * 0.25 + 250,\n      height: \"100%\",\n      maxHeight: 150,\n      backgroundColor: props.book.background,\n      minHeight: 150,\n      marginTop: 20\n    },\n    onPress: bookHandler,\n    children: [_jsx(Menu, {\n      visible: visible,\n      onDismiss: closeMenu,\n      anchor: _jsx(Button, {\n        onPress: openMenu,\n        style: {\n          alignSelf: \"flex-end\",\n          height: \"10%\"\n        },\n        icon: \"menu\",\n        children: \"Menu\"\n      }),\n      children: _jsx(Menu.Item, {\n        onPress: deleteBook,\n        title: \"Deletar\"\n      })\n    }), _jsx(View, {\n      style: {\n        width: \"100%\",\n        maxHeight: \"50%\",\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 20,\n          color: props.book.color,\n          textAlign: \"center\"\n        },\n        children: props.book.name\n      })\n    })]\n  });\n}","map":{"version":3,"names":["BookAPI","useNavigation","useRoute","useState","Button","Menu","jsx","_jsx","jsxs","_jsxs","BookPressable","props","navigation","route","_useState","_useState2","_slicedToArray","visible","setVisible","openMenu","closeMenu","token","params","bookHandler","navigate","book","deleteBook","api","delete","id","then","res","setBooks","books","filter","b","setData","alert","Pressable","style","flex","width","window","height","maxHeight","backgroundColor","background","minHeight","marginTop","onPress","children","onDismiss","anchor","alignSelf","icon","Item","title","View","justifyContent","alignItems","Text","fontSize","color","textAlign","name"],"sources":["/home/ojoquinhaa/Documentos/trabalho/inktone/fixar/components/Book/BookPressable.tsx"],"sourcesContent":["import { Pressable, ScaledSize, Text, View } from \"react-native\";\nimport BookAPI, { Book } from \"../../API/Book\";\nimport {\n  NavigationProp,\n  RouteProp,\n  useNavigation,\n  useRoute,\n} from \"@react-navigation/native\";\nimport DrawerList from \"../Drawer/DrawerList\";\nimport { Dispatch, SetStateAction, useState } from \"react\";\nimport { Button, Menu } from \"react-native-paper\";\n\ntype props = {\n  book: Book;\n  window: ScaledSize;\n  token: string;\n  books: Book[];\n  setBooks: Dispatch<SetStateAction<Book[]>>;\n  setData: Dispatch<SetStateAction<Book[]>>;\n};\n\nexport default function BookPressable(props: props) {\n  const navigation = useNavigation<NavigationProp<DrawerList>>();\n  const route = useRoute<RouteProp<DrawerList>>();\n\n  const [visible, setVisible] = useState(false);\n  const openMenu = () => setVisible(true);\n  const closeMenu = () => setVisible(false);\n\n  const { token } = route.params;\n\n  function bookHandler() {\n    navigation.navigate(\"Fantastic\", {\n      book: props.book,\n      token: props.token,\n    });\n  }\n\n  function deleteBook() {\n    const api = new BookAPI(token);\n    api.delete(props.book.id!).then((res) => {\n      if (res === 204) {\n        props.setBooks(props.books.filter((b) => b.id !== props.book.id));\n        props.setData(props.books.filter((b) => b.id !== props.book.id));\n        alert(\"Livro deletado com sucesso!\");\n        return;\n      }\n      alert(\"Falha ao deletar seu livro.\");\n    });\n  }\n\n  return (\n    <Pressable\n      style={{\n        flex: 1,\n        width: props.window.width * 0.25 + 250,\n        height: \"100%\",\n        maxHeight: 150,\n        backgroundColor: props.book.background,\n        minHeight: 150,\n        marginTop: 20,\n      }}\n      onPress={bookHandler}\n    >\n      <Menu\n        visible={visible}\n        onDismiss={closeMenu}\n        anchor={\n          <Button\n            onPress={openMenu}\n            style={{ alignSelf: \"flex-end\", height: \"10%\" }}\n            icon=\"menu\"\n          >\n            Menu\n          </Button>\n        }\n      >\n        <Menu.Item onPress={deleteBook} title=\"Deletar\" />\n      </Menu>\n      <View\n        style={{\n          width: \"100%\",\n          maxHeight: \"50%\",\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Text\n          style={{\n            fontSize: 20,\n            color: props.book.color,\n            textAlign: \"center\",\n          }}\n        >\n          {props.book.name}\n        </Text>\n      </View>\n    </Pressable>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}